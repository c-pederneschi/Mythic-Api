// Prisma schema para chat com Gemini

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("PRISMA_DATABASE_URL")
}

// Message - Mensagem do chat
model Message {
  id        Int     @id @default(autoincrement())
  author    String  // "user" ou "assistant"
  content   String
  createdAt DateTime @default(now())
  
  @@map("messages")
}

// TokenUsage - registro de uso de tokens por chamada à IA
model TokenUsage {
  id              Int      @id @default(autoincrement())
  model           String
  responseId      String?
  promptTokens    Int
  completionTokens Int
  totalTokens     Int
  thoughtsTokens  Int?
  createdAt       DateTime @default(now())

  @@map("token_usage")
}

// AdventureState - estado simples da aventura (evoluível para login no futuro)
model AdventureState {
  id         Int      @id @default(autoincrement())
  profileKey String   @unique @default("anonymous")
  chaosFactor Int     @default(5)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@map("adventure_state")
}
